{"is_source_file": true, "format": "Kotlin", "description": "MainActivity class for an Android app that handles video playback with ExoPlayer, user controls, and subtitle overlay, using ViewModel for state management.", "external_files": ["R.layout.activity_main", "org.example.app.ui.PlayerViewModel", "org.example.app.util.TimeUtils", "R.string.subtitle_placeholder", "R.string.action_pause", "R.string.action_play"], "external_methods": ["TimeUtils.formatMs", "ViewModelProvider", "appCompatActivity.setContentView", "findViewById", "registerForActivityResult", "MediaItem.fromUri", "player.prepare", "player.setMediaItem", "player.playWhenReady", "player.stop", "player.clearMediaItems", "playerView.player", "ContextCompat.checkSelfPermission", "shouldShowRequestPermissionRationale", "requestPermissionLauncher.launch", "getString"], "published": ["org.example.app.MainActivity"], "classes": [{"name": "MainActivity", "description": "Main activity class managing video playback, UI, and subtitle overlay in an Android app."}], "methods": [{"name": "onCreate", "description": "Initializes views, ViewModel, sets up the player, controls, and observers; handles intent data."}, {"name": "setupPlayer", "description": "Initializes the ExoPlayer instance and associates it with the PlayerView."}, {"name": "setupControls", "description": "Sets up click listeners for open, play/pause, stop buttons and seek bar changes."}, {"name": "observeState", "description": "Sets LiveData observers for subtitle text, playback position, duration, and play state to update the UI."}, {"name": "togglePlayPause", "description": "Toggles playback state between play and pause."}, {"name": "stopPlayback", "description": "Stops the video playback and resets the subtitle overlay."}, {"name": "loadVideo", "description": "Loads a video from a given URI into the player and starts playback."}, {"name": "ensureStoragePermissionThen", "description": "Checks and requests storage permission before opening the video picker."}], "calls": ["viewModel.player()", "player.setMediaItem", "player.prepare", "player.playWhenReady", "player.stop", "player.clearMediaItems", "TimeUtils.formatMs", "viewModel.startTicker", "viewModel.stopTicker", "pickVideoLauncher.launch", "requestPermissionLauncher.launch"], "search-terms": ["MainActivity", "ExoPlayer", "SubtitleOverlay", "VideoPlayback", "Kotlin Android Activity", "ViewModel", "Media Picker", "Runtime Permissions", "Video Loading"], "state": 2, "file_id": 16, "knowledge_revision": 47, "git_revision": "19aa184792c30e6952bfd7838ff42da963582c28", "revision_history": [{"35": ""}, {"43": "ea8d1976b480673d3a462a5ffd2cd3ef3ceb5569"}, {"47": "19aa184792c30e6952bfd7838ff42da963582c28"}], "hash": "10e27f0597dbb8b0d8500db2fcd2b2b6", "format-version": 4, "code-base-name": "android_subtitle_frontend", "filename": "android_subtitle_frontend/app/src/main/kotlin/org/example/app/MainActivity.kt"}