{"is_source_file": true, "format": "Kotlin", "description": "MainActivity.kt defines the primary activity for an Android app that hosts a video player with subtitle overlay functionalities. It manages UI components, handles video selection, controls playback via ExoPlayer, and interacts with a ViewModel for state management, including subtitle display and video controls.", "external_files": ["R.layout.activity_main", "R.id.topAppBar", "R.id.playerView", "R.id.btnOpen", "R.id.btnPlayPause", "R.id.btnStop", "R.id.seekBar", "R.id.txtCurrentTime", "R.id.txtDuration", "R.id.subtitleOverlay", "R.string.subtitle_placeholder", "R.string.action_pause", "R.string.action_play"], "external_methods": ["TimeUtils.formatMs", "ViewModelProvider"], "published": ["MainActivity"], "classes": [{"name": "MainActivity", "description": "Primary activity handling video playback, user controls, and subtitle overlay. Manages UI components, video loading, and playback state."}], "methods": [{"name": "onCreate", "description": "Initializes the activity, sets up UI components, ViewModel, and video player. Handles intents for opening videos."}, {"name": "setupPlayer", "description": "Configures the ExoPlayer instance and associates it with the PlayerView."}, {"name": "setupControls", "description": "Sets up click listeners for control buttons and seek bar behavior."}, {"name": "observeState", "description": "Observes ViewModel LiveData to update UI components for subtitle text, playback position, duration, and play/pause state."}, {"name": "togglePlayPause", "description": "Toggles between playing and pausing the video."}, {"name": "stopPlayback", "description": "Stops the video, clears media items, and resets the subtitle overlay."}, {"name": "loadVideo", "description": "Loads a selected video URI into the player and starts playback."}, {"name": "ensureStoragePermissionThen", "description": "Checks for storage permissions before launching video picker."}], "calls": ["viewModel.player()", "player.setMediaItem", "player.prepare", "player.playWhenReady", "player.stop", "player.clearMediaItems", "TimeUtils.formatMs", "viewModel.startTicker", "viewModel.stopTicker"], "search-terms": ["MainActivity", "video playback Android Kotlin", "ExoPlayer integration", "subtitle overlay", "ViewModel for media control", "video selection intent", "UI controls frequency control", "Android permission handling"], "state": 2, "file_id": 16, "knowledge_revision": 43, "git_revision": "ea8d1976b480673d3a462a5ffd2cd3ef3ceb5569", "revision_history": [{"35": ""}, {"43": "ea8d1976b480673d3a462a5ffd2cd3ef3ceb5569"}], "hash": "f9c8bdc5cb77a34faa53a98f5d2ec1a4", "format-version": 4, "code-base-name": "android_subtitle_frontend", "filename": "android_subtitle_frontend/app/src/main/kotlin/org/example/app/MainActivity.kt"}