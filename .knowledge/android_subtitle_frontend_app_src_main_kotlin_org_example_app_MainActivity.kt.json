{"is_source_file": true, "format": "Kotlin", "description": "MainActivity.kt is the main entry point activity hosting a video player with controls, subtitle overlay, and video selection functionality. It initializes ExoPlayer via a ViewModel, manages UI interactions, and handles permissions.", "external_files": ["res/layout/activity_main.xml", "org/example/app/ui/PlayerViewModel.kt", "org/example/app/util/TimeUtils.kt", "com.google.android.exoplayer2.ExoPlayer.kt", "com.google.android.exoplayer2.MediaItem.kt", "androidx.appcompat.widget.Toolbar.kt", "com.google.android.material.button.MaterialButton.kt", "com.google.android.material.slider.Slider.kt"], "external_methods": ["android.app.ActivityResultContracts.GetContent", "androidx.activity.result.contract.ActivityResultContracts.RequestPermission", "androidx.activity.result.contract.ActivityResultContracts.GetContent", "androidx.core.content.ContextCompat.checkSelfPermission", "androidx.lifecycle.ViewModelProvider.get", "android.app.Activity.onCreate", "android.os.Build.VERSION.SDK_INT", "android.view.View.setOnClickListener", "android.widget.TextView.setText", "androidx.appcompat.app.AppCompatActivity.setContentView", "androidx.appcompat.widget.Toolbar.setOnMenuItemClickListener", "android.content.Intent.setData", "android.content.Intent.setAction", "android.net.Uri.parse", "android.content.Intent", "androidx.activity.result.contract.ActivityResultContracts.RequestPermission"], "published": ["org.example.app.ui.PlayerViewModel", "org.example.app.util.TimeUtils", "org.example.app.R"], "classes": [{"name": "MainActivity", "description": "MainActivity manages video playback, user controls, subtitle display, and interaction with the file system and permissions."}], "methods": [{"name": "onCreate", "description": "Initializes UI components, ViewModel, sets up player and controls, and handles incoming intents for video loading."}, {"name": "setupPlayer", "description": "Initializes the ExoPlayer instance and attaches it to the PlayerView."}, {"name": "setupControls", "description": "Sets up click listeners for control buttons and slider change listener for seeking."}, {"name": "observeState", "description": "Observes ViewModel LiveData objects to update UI components accordingly."}, {"name": "togglePlayPause", "description": "Toggles the playback state between play and pause."}, {"name": "stopPlayback", "description": "Stops the video and clears media, resetting subtitle overlay."}, {"name": "loadVideo", "description": "Loads a selected video URI into the player and starts playback."}, {"name": "onMenuItemClick", "description": "Handles menu item selections for settings and help."}, {"name": "ensureStoragePermissionThen", "description": "Checks and requests storage permission before allowing video selection."}], "calls": ["viewModel.player()", "player.setMediaItem", "player.prepare", "player.playWhenReady", "player.stop", "player.clearMediaItems", "seekBar.addOnChangeListener", "TimeUtils.formatMs", "getString", "registerForActivityResult", "startActivity", "Uri.parse", "setContentView", "setOnMenuItemClickListener", "setOnClickListener"], "search-terms": ["MainActivity", "video playback", "subtitle overlay", "ExoPlayer", "video file picker", "MediaItem", "navigation", "Android activity", "permission handling", "UI controls"], "state": 2, "file_id": 16, "knowledge_revision": 35, "git_revision": "", "hash": "7d227d072b54e60cfc0c4807750e8ce0", "format-version": 4, "code-base-name": "android_subtitle_frontend", "filename": "android_subtitle_frontend/app/src/main/kotlin/org/example/app/MainActivity.kt", "revision_history": [{"35": ""}]}